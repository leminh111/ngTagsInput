{"version":3,"file":null,"sources":["/Users/leminh111/Documents/projects/ngTagsInput/src/constants.js","/Users/leminh111/Documents/projects/ngTagsInput/src/tags-input.js","/Users/leminh111/Documents/projects/ngTagsInput/src/tag-item.js","/Users/leminh111/Documents/projects/ngTagsInput/src/auto-complete.js","/Users/leminh111/Documents/projects/ngTagsInput/src/auto-complete-match.js","/Users/leminh111/Documents/projects/ngTagsInput/src/autosize.js","/Users/leminh111/Documents/projects/ngTagsInput/src/bind-attrs.js","/Users/leminh111/Documents/projects/ngTagsInput/src/transclude-append.js","/Users/leminh111/Documents/projects/ngTagsInput/src/configuration.js","/Users/leminh111/Documents/projects/ngTagsInput/src/util.js","/Users/leminh111/Documents/projects/ngTagsInput/build/tmp/compiled-templates.js","/Users/leminh111/Documents/projects/ngTagsInput/src/init.js"],"sourcesContent":["export default {\n  KEYS: {\n    backspace: 8,\n    tab: 9,\n    enter: 13,\n    escape: 27,\n    space: 32,\n    up: 38,\n    down: 40,\n    left: 37,\n    right: 39,\n    delete: 46,\n    comma: 188\n  },\n  MAX_SAFE_INTEGER: 9007199254740991,\n  SUPPORTED_INPUT_TYPES: ['text', 'email', 'url']\n};\n\n","/**\n * @ngdoc directive\n * @name tagsInput\n * @module ngTagsInput\n *\n * @description\n * Renders an input box with tag editing support.\n *\n * @param {string} ngModel Assignable Angular expression to data-bind to.\n * @param {boolean=} [useStrings=false] Flag indicating that the model is an array of strings (EXPERIMENTAL).\n * @param {string=} [template=NA] URL or id of a custom template for rendering each tag.\n * @param {string=} [templateScope=NA] Scope to be passed to custom templates - of both tagsInput and\n *    autoComplete directives - as $scope.\n * @param {string=} [displayProperty=text] Property to be rendered as the tag label.\n * @param {string=} [keyProperty=text] Property to be used as a unique identifier for the tag.\n * @param {string=} [type=text] Type of the input element. Only 'text', 'email' and 'url' are supported values.\n * @param {string=} [text=NA] Assignable Angular expression for data-binding to the element's text.\n * @param {number=} tabindex Tab order of the control.\n * @param {string=} [placeholder=Add a tag] Placeholder text for the control.\n * @param {number=} [minLength=3] Minimum length for a new tag.\n * @param {number=} [maxLength=MAX_SAFE_INTEGER] Maximum length allowed for a new tag.\n * @param {number=} [minTags=0] Sets minTags validation error key if the number of tags added is less than minTags.\n * @param {number=} [maxTags=MAX_SAFE_INTEGER] Sets maxTags validation error key if the number of tags added is greater\n *    than maxTags.\n * @param {boolean=} [allowLeftoverText=false] Sets leftoverText validation error key if there is any leftover text in\n *    the input element when the directive loses focus.\n * @param {string=} [removeTagSymbol=Ã—] (Obsolete) Symbol character for the remove tag button.\n * @param {boolean=} [addOnEnter=true] Flag indicating that a new tag will be added on pressing the ENTER key.\n * @param {boolean=} [addOnSpace=false] Flag indicating that a new tag will be added on pressing the SPACE key.\n * @param {boolean=} [addOnComma=true] Flag indicating that a new tag will be added on pressing the COMMA key.\n * @param {boolean=} [addOnBlur=true] Flag indicating that a new tag will be added when the input field loses focus.\n * @param {boolean=} [addOnPaste=false] Flag indicating that the text pasted into the input field will be split into tags.\n * @param {string=} [pasteSplitPattern=,] Regular expression used to split the pasted text into tags.\n * @param {boolean=} [replaceSpacesWithDashes=true] Flag indicating that spaces will be replaced with dashes.\n * @param {string=} [allowedTagsPattern=.+] Regular expression that determines whether a new tag is valid.\n * @param {boolean=} [enableEditingLastTag=false] Flag indicating that the last tag will be moved back into the new tag\n *    input box instead of being removed when the backspace key is pressed and the input box is empty.\n * @param {boolean=} [addFromAutocompleteOnly=false] Flag indicating that only tags coming from the autocomplete list\n *    will be allowed. When this flag is true, addOnEnter, addOnComma, addOnSpace and addOnBlur values are ignored.\n * @param {boolean=} [spellcheck=true] Flag indicating whether the browser's spellcheck is enabled for the input field or not.\n * @param {expression=} [tagClass=NA] Expression to evaluate for each existing tag in order to get the CSS classes to be used.\n *    The expression is provided with the current tag as $tag, its index as $index and its state as $selected. The result\n *    of the evaluation must be one of the values supported by the ngClass directive (either a string, an array or an object).\n *    See https://docs.angularjs.org/api/ng/directive/ngClass for more information.\n * @param {expression=} [onTagAdding=NA] Expression to evaluate that will be invoked before adding a new tag. The new\n *    tag is available as $tag. This method must return either a boolean value or a promise. If either a false value or a rejected\n *    promise is returned, the tag will not be added.\n * @param {expression=} [onTagAdded=NA] Expression to evaluate upon adding a new tag. The new tag is available as $tag.\n * @param {expression=} [onInvalidTag=NA] Expression to evaluate when a tag is invalid. The invalid tag is available as $tag.\n * @param {expression=} [onTagRemoving=NA] Expression to evaluate that will be invoked before removing a tag. The tag\n *    is available as $tag. This method must return either a boolean value or a promise. If either a false value or a rejected\n *    promise is returned, the tag will not be removed.\n * @param {expression=} [onTagRemoved=NA] Expression to evaluate upon removing an existing tag. The removed tag is available as $tag.\n * @param {expression=} [onTagClicked=NA] Expression to evaluate upon clicking an existing tag. The clicked tag is available as $tag.\n */\nexport default function TagsInputDirective($timeout, $document, $window, $q, tagsInputConfig, tiUtil, tiConstants) {\n  'ngInject';\n\n  function TagList(options, events, onTagAdding, onTagRemoving) {\n    let self = {};\n\n    let getTagText = tag =>tiUtil.safeToString(tag[options.displayProperty]);\n    let setTagText = (tag, text) => {\n      tag[options.displayProperty] = text;\n    };\n\n    let canAddTag = tag => {\n      let tagText = getTagText(tag);\n      let valid = tagText &&\n                  tagText.length >= options.minLength &&\n                  tagText.length <= options.maxLength &&\n                  options.allowedTagsPattern.test(tagText) &&\n                  !tiUtil.findInObjectArray(self.items, tag, options.keyProperty || options.displayProperty);\n\n      return $q.when(valid && onTagAdding({ $tag: tag })).then(tiUtil.promisifyValue);\n    };\n\n    let canRemoveTag = tag => $q.when(onTagRemoving({ $tag: tag })).then(tiUtil.promisifyValue);\n\n    self.items = [];\n\n    self.addText = text => {\n      let tag = {};\n      setTagText(tag, text);\n      return self.add(tag);\n    };\n\n    self.add = tag => {\n      let tagText = getTagText(tag);\n\n      if (options.replaceSpacesWithDashes) {\n        tagText = tiUtil.replaceSpacesWithDashes(tagText);\n      }\n\n      setTagText(tag, tagText);\n\n      return canAddTag(tag)\n        .then(() =>{\n          self.items.push(tag);\n          events.trigger('tag-added', { $tag: tag });\n        })\n        .catch(() => {\n          if (tagText) {\n            events.trigger('invalid-tag', { $tag: tag });\n          }\n        });\n    };\n\n    self.remove = index => {\n      let tag = self.items[index];\n      return canRemoveTag(tag).then(() => {\n        self.items.splice(index, 1);\n        self.clearSelection();\n        events.trigger('tag-removed', { $tag: tag });\n        return tag;\n      });\n    };\n\n    self.select = index => {\n      if (index < 0) {\n        index = self.items.length - 1;\n      }\n      else if (index >= self.items.length) {\n        index = 0;\n      }\n\n      self.index = index;\n      self.selected = self.items[index];\n    };\n\n    self.selectPrior = () => {\n      self.select(--self.index);\n    };\n\n    self.selectNext = () => {\n      self.select(++self.index);\n    };\n\n    self.removeSelected = () => self.remove(self.index);\n\n    self.clearSelection = () => {\n      self.selected = null;\n      self.index = -1;\n    };\n\n    self.getItems = () => options.useStrings ? self.items.map(getTagText) : self.items;\n\n    self.clearSelection();\n\n    self.getStateTagJustAdded = () => self.tagJustAdded;\n    self.setStateTagJustAdded = (state) => { self.tagJustAdded = state; };\n\n    return self;\n  }\n\n  function validateType(type) {\n    return tiConstants.SUPPORTED_INPUT_TYPES.indexOf(type) !== -1;\n  }\n\n  return {\n    restrict: 'E',\n    require: 'ngModel',\n    scope: {\n      tags: '=ngModel',\n      text: '=?',\n      templateScope: '=?',\n      tagClass: '&',\n      onTagAdding: '&',\n      onTagAdded: '&',\n      onInvalidTag: '&',\n      onTagRemoving: '&',\n      onTagRemoved: '&',\n      onTagClicked: '&',\n    },\n    replace: false,\n    transclude: true,\n    templateUrl: 'ngTagsInput/tags-input.html',\n    controller($scope, $element, $attrs) {\n      'ngInject';\n\n      $scope.events = tiUtil.simplePubSub();\n\n      $scope.options = tagsInputConfig.load('tagsInput', $element, $attrs, $scope.events, {\n        template: [String, 'ngTagsInput/tag-item.html'],\n        type: [String, 'text', validateType],\n        placeholder: [String, 'Add a tag'],\n        tabindex: [Number, null],\n        removeTagSymbol: [String, String.fromCharCode(215)],\n        replaceSpacesWithDashes: [Boolean, true],\n        minLength: [Number, 3],\n        maxLength: [Number, tiConstants.MAX_SAFE_INTEGER],\n        addOnEnter: [Boolean, true],\n        addOnSpace: [Boolean, false],\n        addOnComma: [Boolean, true],\n        addOnBlur: [Boolean, true],\n        addOnPaste: [Boolean, false],\n        pasteSplitPattern: [RegExp, /,/],\n        allowedTagsPattern: [RegExp, /.+/],\n        enableEditingLastTag: [Boolean, false],\n        minTags: [Number, 0],\n        maxTags: [Number, tiConstants.MAX_SAFE_INTEGER],\n        displayProperty: [String, 'text'],\n        keyProperty: [String, ''],\n        allowLeftoverText: [Boolean, false],\n        addFromAutocompleteOnly: [Boolean, false],\n        spellcheck: [Boolean, true],\n        useStrings: [Boolean, false]\n      });\n\n      $scope.tagList = new TagList($scope.options, $scope.events,\n        tiUtil.handleUndefinedResult($scope.onTagAdding, true),\n        tiUtil.handleUndefinedResult($scope.onTagRemoving, true));\n\n      this.registerAutocomplete = () => ({\n        addTag: function(tag) {\n          return $scope.tagList.add(tag);\n        },\n        getTags: function() {\n          return $scope.tagList.items;\n        },\n        getCurrentTagText: function() {\n          return $scope.newTag.text();\n        },\n        getOptions: function() {\n          return $scope.options;\n        },\n        getTemplateScope: function() {\n          return $scope.templateScope;\n        },\n        on: function(name, handler) {\n          $scope.events.on(name, handler, true);\n          return this;\n        },\n        getStateTagJustAdded: function() {\n          return $scope.tagList.getStateTagJustAdded();\n        },\n        setStateTagJustAdded: function(state) {\n          return $scope.tagList.setStateTagJustAdded(state);\n        },\n      });\n\n      this.registerTagItem = () => ({\n        getOptions: function () {\n          return $scope.options;\n        },\n        removeTag: function (index) {\n          if ($scope.disabled) {\n            return;\n          }\n          $scope.tagList.remove(index);\n        }\n      });\n    },\n    link(scope, element, attrs, ngModelCtrl) {\n      let hotkeys = [tiConstants.KEYS.enter, tiConstants.KEYS.comma, tiConstants.KEYS.space, tiConstants.KEYS.backspace,\n        tiConstants.KEYS.delete, tiConstants.KEYS.left, tiConstants.KEYS.right];\n      let tagList = scope.tagList;\n      let events = scope.events;\n      let options = scope.options;\n      let input = element.find('input');\n      let validationOptions = ['minTags', 'maxTags', 'allowLeftoverText'];\n\n      let setElementValidity = () => {\n        ngModelCtrl.$setValidity('maxTags', tagList.items.length <= options.maxTags);\n        ngModelCtrl.$setValidity('minTags', tagList.items.length >= options.minTags);\n        ngModelCtrl.$setValidity('leftoverText', scope.hasFocus || options.allowLeftoverText ? true : !scope.newTag.text());\n      };\n\n      let focusInput = () => {\n        $timeout(() => { input[0].focus(); });\n      };\n\n      ngModelCtrl.$isEmpty = value => !value || !value.length;\n\n      scope.newTag = {\n        text(value) {\n          if (angular.isDefined(value)) {\n            scope.text = value;\n            events.trigger('input-change', value);\n          }\n          else {\n            return scope.text || '';\n          }\n        },\n        invalid: null\n      };\n\n      scope.track = tag => tag[options.keyProperty || options.displayProperty];\n\n      scope.getTagClass = (tag, index) => {\n        let selected = tag === tagList.selected;\n        return [\n          scope.tagClass({$tag: tag, $index: index, $selected: selected}),\n                    { selected: selected }\n        ];\n      };\n\n      scope.$watch('tags', value => {\n        if (value) {\n          tagList.items = tiUtil.makeObjectArray(value, options.displayProperty);\n          if (options.useStrings) {\n            return;\n          }\n\n          scope.tags = tagList.items;\n        }\n        else {\n          tagList.items = [];\n        }\n      });\n\n      scope.$watch('tags.length', () => {\n        setElementValidity();\n\n        // ngModelController won't trigger validators when the model changes (because it's an array),\n        // so we need to do it ourselves. Unfortunately this won't trigger any registered formatter.\n        ngModelCtrl.$validate();\n      });\n\n      attrs.$observe('disabled', value => {\n        scope.disabled = value;\n      });\n\n      scope.eventHandlers = {\n        input: {\n          keydown($event) {\n            events.trigger('input-keydown', $event);\n          },\n          focus() {\n            if (scope.hasFocus) {\n              return;\n            }\n\n            scope.hasFocus = true;\n            events.trigger('input-focus');\n          },\n          blur() {\n            $timeout(() => {\n              let activeElement = $document.prop('activeElement');\n              let lostFocusToBrowserWindow = activeElement === input[0];\n              let lostFocusToChildElement = element[0].contains(activeElement);\n\n              if (lostFocusToBrowserWindow || !lostFocusToChildElement) {\n                scope.hasFocus = false;\n                events.trigger('input-blur');\n              }\n            });\n          },\n          paste($event) {\n            $event.getTextData = () => {\n              let clipboardData = $event.clipboardData || ($event.originalEvent && $event.originalEvent.clipboardData);\n              return clipboardData ? clipboardData.getData('text/plain') : $window.clipboardData.getData('Text');\n            };\n            events.trigger('input-paste', $event);\n          },\n          click() {\n            events.trigger('input-click');\n          }\n        },\n        host: {\n          click() {\n            if (scope.disabled) {\n              return;\n            }\n            focusInput();\n          }\n        },\n        tag: {\n          click(tag) {\n            events.trigger('tag-clicked', { $tag: tag });\n          }\n        }\n      };\n\n      events\n        .on('tag-added', scope.onTagAdded)\n        .on('invalid-tag', scope.onInvalidTag)\n        .on('tag-removed', scope.onTagRemoved)\n        .on('tag-clicked', scope.onTagClicked)\n        .on('tag-added', () => {\n          tagList.setStateTagJustAdded(true);\n          scope.newTag.text('');\n        })\n        .on('tag-added tag-removed', () => {\n          scope.tags = tagList.getItems();\n          // Ideally we should be able call $setViewValue here and let it in turn call $setDirty and $validate\n          // automatically, but since the model is an array, $setViewValue does nothing and it's up to us to do it.\n          // Unfortunately this won't trigger any registered $parser and there's no safe way to do it.\n          ngModelCtrl.$setDirty();\n          focusInput();\n        })\n        .on('invalid-tag', () => {\n          scope.newTag.invalid = true;\n        })\n        .on('option-change', e => {\n          if (validationOptions.indexOf(e.name) !== -1) {\n            setElementValidity();\n          }\n        })\n        .on('input-change', () => {\n          tagList.clearSelection();\n          scope.newTag.invalid = null;\n        })\n        .on('input-focus', () => {\n          element.triggerHandler('focus');\n          ngModelCtrl.$setValidity('leftoverText', true);\n        })\n        .on('input-blur', () => {\n          if (options.addOnBlur && !options.addFromAutocompleteOnly) {\n            tagList.addText(scope.newTag.text());\n          }\n          element.triggerHandler('blur');\n          setElementValidity();\n        })\n        .on('input-keydown', event => {\n          let key = event.keyCode;\n\n          if (tiUtil.isModifierOn(event) || hotkeys.indexOf(key) === -1) {\n            return;\n          }\n\n          let addKeys = {\n            [tiConstants.KEYS.enter]: options.addOnEnter,\n            [tiConstants.KEYS.comma]: options.addOnComma,\n            [tiConstants.KEYS.space]: options.addOnSpace\n          };\n\n          let shouldAdd = !options.addFromAutocompleteOnly && addKeys[key];\n          let shouldRemove = (key === tiConstants.KEYS.backspace || key === tiConstants.KEYS.delete) && tagList.selected;\n          let shouldEditLastTag = key === tiConstants.KEYS.backspace && scope.newTag.text().length === 0 && options.enableEditingLastTag;\n          let shouldSelect = (key === tiConstants.KEYS.backspace || key === tiConstants.KEYS.left || key === tiConstants.KEYS.right) &&\n            scope.newTag.text().length === 0 && !options.enableEditingLastTag;\n\n          if (shouldAdd) {\n            tagList.addText(scope.newTag.text());\n          }\n          else if (shouldEditLastTag) {\n            tagList.selectPrior();\n            tagList.removeSelected().then(tag => {\n              if (tag) {\n                scope.newTag.text(tag[options.displayProperty]);\n              }\n            });\n          }\n          else if (shouldRemove) {\n            tagList.removeSelected();\n          }\n          else if (shouldSelect) {\n            if (key === tiConstants.KEYS.left || key === tiConstants.KEYS.backspace) {\n              tagList.selectPrior();\n            }\n            else if (key === tiConstants.KEYS.right) {\n              tagList.selectNext();\n            }\n          }\n\n          if (shouldAdd || shouldSelect || shouldRemove || shouldEditLastTag) {\n            event.preventDefault();\n          }\n        })\n        .on('input-paste', event => {\n          if (options.addOnPaste) {\n            let data = event.getTextData();\n            let tags = data.split(options.pasteSplitPattern);\n\n            if (tags.length > 1) {\n              tags.forEach(tag => {\n                tagList.addText(tag);\n              });\n              event.preventDefault();\n            }\n          }\n        });\n    }\n  };\n}\n","/**\n * @ngdoc directive\n * @name tiTagItem\n * @module ngTagsInput\n *\n * @description\n * Represents a tag item. Used internally by the tagsInput directive.\n */\nexport default function TagItemDirective(tiUtil) {\n  'ngInject';\n\n  return {\n    restrict: 'E',\n    require: '^tagsInput',\n    template: '<ng-include src=\"$$template\"></ng-include>',\n    scope: {\n      $scope: '=scope',\n      data: '='\n    },\n    link(scope, element, attrs, tagsInputCtrl) {\n      let tagsInput = tagsInputCtrl.registerTagItem();\n      let options = tagsInput.getOptions();\n\n      scope.$$template = options.template;\n      scope.$$removeTagSymbol = options.removeTagSymbol;\n\n      scope.$getDisplayText = () => tiUtil.safeToString(scope.data[options.displayProperty]);\n      scope.$removeTag = () => {\n        tagsInput.removeTag(scope.$index);\n      };\n\n      scope.$watch('$parent.$index', value => {\n        scope.$index = value;\n      });\n    }\n  };\n}\n","/**\n * @ngdoc directive\n * @name autoComplete\n * @module ngTagsInput\n *\n * @description\n * Provides autocomplete support for the tagsInput directive.\n *\n * @param {expression} source Expression to evaluate upon changing the input content. The input value is available as\n *    $query. The result of the expression must be a promise that eventually resolves to an array of strings.\n * @param {string=} [template=NA] URL or id of a custom template for rendering each element of the autocomplete list.\n * @param {string=} [displayProperty=tagsInput.displayText] Property to be rendered as the autocomplete label.\n * @param {number=} [debounceDelay=100] Amount of time, in milliseconds, to wait before evaluating the expression in\n *    the source option after the last keystroke.\n * @param {number=} [minLength=3] Minimum number of characters that must be entered before evaluating the expression\n *    in the source option.\n * @param {boolean=} [highlightMatchedText=true] Flag indicating that the matched text will be highlighted in the\n *    suggestions list.\n * @param {number=} [maxResultsToShow=10] Maximum number of results to be displayed at a time.\n * @param {boolean=} [loadOnDownArrow=false] Flag indicating that the source option will be evaluated when the down arrow\n *    key is pressed and the suggestion list is closed. The current input value is available as $query.\n * @param {boolean=} [loadOnEmpty=false] Flag indicating that the source option will be evaluated when the input content\n *    becomes empty. The $query variable will be passed to the expression as an empty string.\n * @param {boolean=} [loadOnFocus=false] Flag indicating that the source option will be evaluated when the input element\n *    gains focus. The current input value is available as $query.\n * @param {boolean=} [selectFirstMatch=true] Flag indicating that the first match will be automatically selected once\n *    the suggestion list is shown.\n * @param {expression=} [matchClass=NA] Expression to evaluate for each match in order to get the CSS classes to be used.\n *    The expression is provided with the current match as $match, its index as $index and its state as $selected. The result\n *    of the evaluation must be one of the values supported by the ngClass directive (either a string, an array or an object).\n *    See https://docs.angularjs.org/api/ng/directive/ngClass for more information.\n */\nexport default function AutocompleteDirective($document, $timeout, $sce, $q, tagsInputConfig, tiUtil, tiConstants) {\n  'ngInject';\n\n  function SuggestionList(loadFn, options, events) {\n    let self = {};\n    let lastPromise = null;\n\n    let getTagId = () => options.tagsInput.keyProperty || options.tagsInput.displayProperty;\n\n    let getDifference = function(array1, array2) {\n      return array1.filter(item => !tiUtil.findInObjectArray(array2, item, getTagId(), (a, b) =>{\n        if (options.tagsInput.replaceSpacesWithDashes) {\n          a = tiUtil.replaceSpacesWithDashes(a);\n          b = tiUtil.replaceSpacesWithDashes(b);\n        }\n        return tiUtil.defaultComparer(a, b);\n      }));\n    };\n\n    let matchQuery = function(query, items) {\n      // IndexOf === 0 will match all items that have the query as the first character\n      // IndexOf > -1 will match all positions\n      const matched = items.filter(item => {\n        if (item && item.text && query) {\n          return item.text.toLocaleLowerCase().indexOf(query) === 0;\n        }\n        return true;\n      });\n      return matched;\n    };\n\n    self.reset = () => {\n      lastPromise = null;\n\n      self.items = [];\n      self.visible = false;\n      self.index = -1;\n      self.selected = null;\n      self.query = null;\n    };\n\n    self.show = () => {\n      // Only highlight when there is input\n      if (options.selectFirstMatch && self.query && self.query.length > 0) {\n          self.select(0);\n      }\n      else {\n        self.selected = null;\n      }\n      self.visible = true;\n    };\n\n    self.load = tiUtil.debounce((query, tags) => {\n      self.query = query;\n\n      let promise = $q.when(loadFn({ $query: query }));\n      lastPromise = promise;\n\n      promise.then(items => {\n        if (promise !== lastPromise) {\n          return;\n        }\n\n        items = tiUtil.makeObjectArray(items.data || items, getTagId());\n        items = getDifference(items, tags);\n        if (options.onlyShowMatched) {\n          items = matchQuery(query, items);\n        }\n        self.items = items.slice(0, options.maxResultsToShow);\n\n        if (self.items.length > 0) {\n          self.show();\n        }\n        else {\n          self.reset();\n        }\n      });\n    }, options.debounceDelay);\n\n    self.selectNext = () => {\n      self.select(++self.index);\n    };\n\n    self.selectPrior = () => {\n      self.select(--self.index);\n    };\n\n    self.select = index => {\n      if (index < 0) {\n        index = self.items.length - 1;\n      }\n      else if (index >= self.items.length) {\n        index = 0;\n      }\n      self.index = index;\n      self.selected = self.items[index];\n      events.trigger('suggestion-selected', index);\n    };\n\n    self.reset();\n\n    return self;\n  }\n\n  function scrollToElement(root, index) {\n    let element = root.find('li').eq(index);\n    let parent = element.parent();\n    let elementTop = element.prop('offsetTop');\n    let elementHeight = element.prop('offsetHeight');\n    let parentHeight = parent.prop('clientHeight');\n    let parentScrollTop = parent.prop('scrollTop');\n\n    if (elementTop < parentScrollTop) {\n      parent.prop('scrollTop', elementTop);\n    }\n    else if (elementTop + elementHeight > parentHeight + parentScrollTop) {\n      parent.prop('scrollTop', elementTop + elementHeight - parentHeight);\n    }\n  }\n\n  return {\n    restrict: 'E',\n    require: '^tagsInput',\n    scope: {\n      source: '&',\n      matchClass: '&'\n    },\n    templateUrl: 'ngTagsInput/auto-complete.html',\n    controller($scope, $element, $attrs) {\n      'ngInject';\n\n      $scope.events = tiUtil.simplePubSub();\n\n      $scope.options = tagsInputConfig.load('autoComplete', $element, $attrs, $scope.events, {\n        template: [String, 'ngTagsInput/auto-complete-match.html'],\n        debounceDelay: [Number, 100],\n        minLength: [Number, 3],\n        highlightMatchedText: [Boolean, true],\n        maxResultsToShow: [Number, 10],\n        loadOnDownArrow: [Boolean, false],\n        loadOnEmpty: [Boolean, false],\n        loadOnFocus: [Boolean, false],\n        selectFirstMatch: [Boolean, true],\n        displayProperty: [String, ''],\n        onlyShowMatched: [Boolean, false]\n      });\n\n      $scope.suggestionList = new SuggestionList($scope.source, $scope.options, $scope.events);\n\n      this.registerAutocompleteMatch = () => ({\n        getOptions: function () {\n          return $scope.options;\n        },\n        getQuery: function () {\n          return $scope.suggestionList.query;\n        }\n      });\n    },\n    link(scope, element, attrs, tagsInputCtrl) {\n      let hotkeys = [tiConstants.KEYS.enter, tiConstants.KEYS.tab, tiConstants.KEYS.escape, tiConstants.KEYS.up, tiConstants.KEYS.down];\n      let suggestionList = scope.suggestionList;\n      let tagsInput = tagsInputCtrl.registerAutocomplete();\n      let options = scope.options;\n      let events = scope.events;\n\n      options.tagsInput = tagsInput.getOptions();\n\n      let shouldLoadSuggestions = value => value && value.length >= options.minLength || !value && options.loadOnEmpty;\n\n      scope.templateScope = tagsInput.getTemplateScope();\n\n      scope.addSuggestionByIndex = index => {\n        suggestionList.select(index);\n        scope.addSuggestion();\n      };\n\n      scope.addSuggestion = () => {\n        let added = false;\n\n        if (suggestionList.selected) {\n          tagsInput.addTag(angular.copy(suggestionList.selected));\n          suggestionList.reset();\n          added = true;\n        }\n        return added;\n      };\n\n      scope.track = item => item[options.tagsInput.keyProperty || options.tagsInput.displayProperty];\n\n      scope.getSuggestionClass = (item, index) => {\n        let selected = item === suggestionList.selected;\n        return [\n          scope.matchClass({$match: item, $index: index, $selected: selected}),\n                    { selected: selected }\n        ];\n      };\n\n      tagsInput\n        .on('tag-added tag-removed invalid-tag input-blur', () => {\n          suggestionList.reset();\n        })\n        .on('input-click', () => {\n          let value = tagsInput.getCurrentTagText();\n          const tags = tagsInput.getTags();\n          if (shouldLoadSuggestions(value)) {\n            suggestionList.load(value, tags);\n          }\n        })\n        .on('input-change', value => {\n          const isTagAdded = tagsInput.getStateTagJustAdded();\n          if (!isTagAdded && shouldLoadSuggestions(value)) {\n            suggestionList.load(value, tagsInput.getTags());\n          }\n          else {\n            suggestionList.reset();\n          }\n          tagsInput.setStateTagJustAdded(false);\n        })\n        .on('input-focus', () => {\n          let value = tagsInput.getCurrentTagText();\n          const tags = tagsInput.getTags();\n          // Only load the suggestion list when there is no tag yet\n          if (options.loadOnFocus && tags.length === 0 && shouldLoadSuggestions(value)) {\n            suggestionList.load(value, tags);\n          }\n        })\n        .on('input-keydown', event => {\n          let key = event.keyCode;\n          let handled = false;\n\n          if (tiUtil.isModifierOn(event) || hotkeys.indexOf(key) === -1) {\n            return;\n          }\n\n          if (suggestionList.visible) {\n\n            if (key === tiConstants.KEYS.down) {\n              suggestionList.selectNext();\n              handled = true;\n            }\n            else if (key === tiConstants.KEYS.up) {\n              suggestionList.selectPrior();\n              handled = true;\n            }\n            else if (key === tiConstants.KEYS.escape) {\n              suggestionList.reset();\n              handled = true;\n            }\n            else if (key === tiConstants.KEYS.enter || key === tiConstants.KEYS.tab) {\n              handled = scope.addSuggestion();\n            }\n          }\n          else {\n            if (key === tiConstants.KEYS.down && scope.options.loadOnDownArrow) {\n              suggestionList.load(tagsInput.getCurrentTagText(), tagsInput.getTags());\n              handled = true;\n            }\n          }\n\n          if (handled) {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            return false;\n          }\n        });\n\n      events.on('suggestion-selected', index => {\n        scrollToElement(element, index);\n      });\n    }\n  };\n}\n","/**\n * @ngdoc directive\n * @name tiAutocompleteMatch\n * @module ngTagsInput\n *\n * @description\n * Represents an autocomplete match. Used internally by the autoComplete directive.\n */\nexport default function AutocompleteMatchDirective($sce, tiUtil) {\n  'ngInject';\n\n  return {\n    restrict: 'E',\n    require: '^autoComplete',\n    template: '<ng-include src=\"$$template\"></ng-include>',\n    scope: {\n      $scope: '=scope',\n      data: '='\n    },\n    link(scope, element, attrs, autoCompleteCtrl) {\n      let autoComplete = autoCompleteCtrl.registerAutocompleteMatch();\n      let options = autoComplete.getOptions();\n\n      scope.$$template = options.template;\n      scope.$index = scope.$parent.$index;\n\n      scope.$highlight = text => {\n        if (options.highlightMatchedText) {\n          text = tiUtil.safeHighlight(text, autoComplete.getQuery());\n        }\n        return $sce.trustAsHtml(text);\n      };\n\n      scope.$getDisplayText = () => tiUtil.safeToString(scope.data[options.displayProperty || options.tagsInput.displayProperty]);\n    }\n  };\n}\n","/**\n * @ngdoc directive\n * @name tiAutosize\n * @module ngTagsInput\n *\n * @description\n * Automatically sets the input's width so its content is always visible. Used internally by tagsInput directive.\n */\nexport default function AutosizeDirective(tagsInputConfig) {\n  'ngInject';\n\n  return {\n    restrict: 'A',\n    require: 'ngModel',\n    link(scope, element, attrs, ctrl) {\n      let threshold = tagsInputConfig.getTextAutosizeThreshold();\n      let span = angular.element('<span class=\"input\"></span>');\n\n      span.css('display', 'none')\n          .css('visibility', 'hidden')\n          .css('width', 'auto')\n          .css('white-space', 'pre');\n\n      element.parent().append(span);\n\n      let resize = originalValue => {\n        let value = originalValue;\n        let width;\n\n        if (angular.isString(value) && value.length === 0) {\n          value = attrs.placeholder;\n        }\n\n        if (value) {\n          span.text(value);\n          span.css('display', '');\n          width = span.prop('offsetWidth');\n          span.css('display', 'none');\n        }\n\n        element.css('width', width ? width + threshold + 'px' : '');\n\n        return originalValue;\n      };\n\n      ctrl.$parsers.unshift(resize);\n      ctrl.$formatters.unshift(resize);\n\n      attrs.$observe('placeholder', value => {\n        if (!ctrl.$modelValue) {\n          resize(value);\n        }\n      });\n    }\n  };\n}","/**\n * @ngdoc directive\n * @name tiBindAttrs\n * @module ngTagsInput\n *\n * @description\n * Binds attributes to expressions. Used internally by tagsInput directive.\n */\nexport default function BindAttributesDirective() {\n  return (scope, element, attrs) => {\n    scope.$watch(attrs.tiBindAttrs, value => {\n      angular.forEach(value, (value, key) => {\n        attrs.$set(key, value);\n      });\n    }, true);\n  };\n}","/**\n * @ngdoc directive\n * @name tiTranscludeAppend\n * @module ngTagsInput\n *\n * @description\n * Re-creates the old behavior of ng-transclude. Used internally by tagsInput directive.\n */\nexport default function TranscludeAppendDirective() {\n  return (scope, element, attrs, ctrl, transcludeFn) => {\n    transcludeFn(clone => {\n      element.append(clone);\n    });\n  };\n}","/**\n * @ngdoc service\n * @name tagsInputConfig\n * @module ngTagsInput\n *\n * @description\n * Sets global configuration settings for both tagsInput and autoComplete directives. It's also used internally to parse and\n *  initialize options from HTML attributes.\n */\nexport default function TagsInputConfigurationProvider() {\n  'ngInject';\n\n  let globalDefaults = {};\n  let interpolationStatus = {};\n  let autosizeThreshold = 3;\n\n  /**\n   * @ngdoc method\n   * @name tagsInputConfig#setDefaults\n   * @description Sets the default configuration option for a directive.\n   *\n   * @param {string} directive Name of the directive to be configured. Must be either 'tagsInput' or 'autoComplete'.\n   * @param {object} defaults Object containing options and their values.\n   *\n   * @returns {object} The service itself for chaining purposes.\n   */\n  this.setDefaults = (directive, defaults) => {\n    globalDefaults[directive] = defaults;\n    return this;\n  };\n\n  /**\n   * @ngdoc method\n   * @name tagsInputConfig#setActiveInterpolation\n   * @description Sets active interpolation for a set of options.\n   *\n   * @param {string} directive Name of the directive to be configured. Must be either 'tagsInput' or 'autoComplete'.\n   * @param {object} options Object containing which options should have interpolation turned on at all times.\n   *\n   * @returns {object} The service itself for chaining purposes.\n   */\n  this.setActiveInterpolation = (directive, options) => {\n    interpolationStatus[directive] = options;\n    return this;\n  };\n\n  /**\n   * @ngdoc method\n   * @name tagsInputConfig#setTextAutosizeThreshold\n   * @description Sets the threshold used by the tagsInput directive to re-size the inner input field element based on its contents.\n   *\n   * @param {number} threshold Threshold value, in pixels.\n   *\n   * @returns {object} The service itself for chaining purposes.\n   */\n  this.setTextAutosizeThreshold = threshold => {\n    autosizeThreshold = threshold;\n    return this;\n  };\n\n  this.$get = $interpolate => {\n    'ngInject';\n\n    let converters = {\n      [String]: value => value.toString(),\n      [Number]: value => parseInt(value, 10),\n      [Boolean]: value => value.toLowerCase() === 'true',\n      [RegExp]: value => new RegExp(value)\n    };\n\n    return {\n      load(directive, element, attrs, events, optionDefinitions) {\n        let defaultValidator = () => true;\n        let options = {};\n\n        angular.forEach(optionDefinitions, (value, key) => {\n          let type = value[0];\n          let localDefault = value[1];\n          let validator = value[2] || defaultValidator;\n          let converter = converters[type];\n\n          let getDefault = () => {\n            let globalValue = globalDefaults[directive] && globalDefaults[directive][key];\n            return angular.isDefined(globalValue) ? globalValue : localDefault;\n          };\n\n          let updateValue = value => {\n            options[key] = value && validator(value) ? converter(value) : getDefault();\n          };\n\n          if (interpolationStatus[directive] && interpolationStatus[directive][key]) {\n            attrs.$observe(key, value => {\n              updateValue(value);\n              events.trigger('option-change', { name: key, newValue: value });\n            });\n          }\n          else {\n            updateValue(attrs[key] && $interpolate(attrs[key])(element.scope()));\n          }\n        });\n\n        return options;\n      },\n      getTextAutosizeThreshold() {\n        return autosizeThreshold;\n      }\n    };\n  };\n}\n","/***\n * @ngdoc service\n * @name tiUtil\n * @module ngTagsInput\n *\n * @description\n * Helper methods used internally by the directive. Should not be called directly from user code.\n */\nexport default function UtilService($timeout, $q) {\n  'ngInject';\n\n  let self = {};\n\n  self.debounce = (fn, delay) => {\n    let timeoutId;\n    return function(...args) {\n      $timeout.cancel(timeoutId);\n      timeoutId = $timeout(function() { fn.apply(null, args); }, delay);\n    };\n  };\n\n  self.makeObjectArray = (array, key) => {\n    if (!angular.isArray(array) || array.length === 0 || angular.isObject(array[0])) {\n      return array;\n    }\n\n    return array.map(item => ({ [key]: item }));\n  };\n\n  self.findInObjectArray = (array, obj, key, comparer) => {\n    let item = null;\n    comparer = comparer || self.defaultComparer;\n\n    array.some(element => {\n      if (comparer(element[key], obj[key])) {\n        item = element;\n        return true;\n      }\n    });\n\n    return item;\n  };\n\n  self.defaultComparer = (a, b) => {\n    // I'm aware of the internationalization issues regarding toLowerCase()\n    // but I couldn't come up with a better solution right now\n    return self.safeToString(a).toLowerCase() === self.safeToString(b).toLowerCase();\n  };\n\n  self.safeHighlight = (str, value) => {\n    str = self.encodeHTML(str);\n    value = self.encodeHTML(value);\n\n    if (!value) {\n      return str;\n    }\n\n    let escapeRegexChars = str => str.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n    let expression = new RegExp('&[^;]+;|' + escapeRegexChars(value), 'gi');\n\n    return str.replace(expression, match => match.toLowerCase() === value.toLowerCase() ? '<em>' + match + '</em>' : match);\n  };\n\n  self.safeToString = value => angular.isUndefined(value) || value === null ? '' : value.toString().trim();\n\n  self.encodeHTML = value => self.safeToString(value).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\n  self.handleUndefinedResult = (fn, valueIfUndefined) => {\n    return function () {\n      let result = fn.apply(null, arguments);\n      return angular.isUndefined(result) ? valueIfUndefined : result;\n    };\n  };\n\n  self.replaceSpacesWithDashes = str => self.safeToString(str).replace(/\\s/g, '-');\n\n  self.isModifierOn = event => event.shiftKey || event.ctrlKey || event.altKey || event.metaKey;\n\n  self.promisifyValue = value => {\n    value = angular.isUndefined(value) ? true : value;\n    return $q[value ? 'when' : 'reject']();\n  };\n\n  self.simplePubSub = function() {\n    let events = {};\n    return {\n      on(names, handler, first) {\n        names.split(' ').forEach(name => {\n          if (!events[name]) {\n            events[name] = [];\n          }\n          let method = first ? [].unshift : [].push;\n          method.call(events[name], handler);\n        });\n        return this;\n      },\n      trigger(name, args) {\n        let handlers = events[name] || [];\n        handlers.every(handler => self.handleUndefinedResult(handler, true)(args));\n        return this;\n      }\n    };\n  };\n\n  return self;\n}\n","/*@ngInject*/\nexport default function TemplateCacheRegister($templateCache) {\n    $templateCache.put('ngTagsInput/auto-complete-match.html',\n    \"<span ng-bind-html=\\\"$highlight($getDisplayText())\\\"></span>\"\n  );\n  $templateCache.put('ngTagsInput/auto-complete.html',\n    \"<div class=\\\"autocomplete\\\" ng-if=\\\"suggestionList.visible\\\"><ul class=\\\"suggestion-list\\\"><li class=\\\"suggestion-item\\\" ng-repeat=\\\"item in suggestionList.items track by track(item)\\\" ng-class=\\\"getSuggestionClass(item, $index)\\\" ng-click=\\\"addSuggestionByIndex($index)\\\" ng-mouseenter=\\\"suggestionList.select($index)\\\"><ti-autocomplete-match scope=\\\"templateScope\\\" data=\\\"::item\\\"></ti-autocomplete-match></li></ul></div>\"\n  );\n  $templateCache.put('ngTagsInput/tag-item.html',\n    \"<span ng-bind=\\\"$getDisplayText()\\\"></span> <a class=\\\"remove-button\\\" ng-click=\\\"$removeTag()\\\" ng-bind=\\\"::$$removeTagSymbol\\\"></a>\"\n  );\n  $templateCache.put('ngTagsInput/tags-input.html',\n    \"<div class=\\\"host\\\" tabindex=\\\"-1\\\" ng-click=\\\"eventHandlers.host.click()\\\" ti-transclude-append><div class=\\\"tags\\\" ng-class=\\\"{focused: hasFocus}\\\"><ul class=\\\"tag-list\\\"><li class=\\\"tag-item\\\" ng-repeat=\\\"tag in tagList.items track by track(tag)\\\" ng-class=\\\"getTagClass(tag, $index)\\\" ng-click=\\\"eventHandlers.tag.click(tag)\\\"><ti-tag-item scope=\\\"templateScope\\\" data=\\\"::tag\\\"></ti-tag-item></li></ul><input class=\\\"input\\\" autocomplete=\\\"off\\\" ng-model=\\\"newTag.text\\\" ng-model-options=\\\"{getterSetter: true}\\\" ng-keydown=\\\"eventHandlers.input.keydown($event)\\\" ng-focus=\\\"eventHandlers.input.focus($event)\\\" ng-blur=\\\"eventHandlers.input.blur($event)\\\" ng-paste=\\\"eventHandlers.input.paste($event)\\\" ng-trim=\\\"false\\\" ng-class=\\\"{'invalid-tag': newTag.invalid}\\\" ng-disabled=\\\"disabled\\\" ng-click=\\\"eventHandlers.input.click($event)\\\" ti-bind-attrs=\\\"{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}\\\"></div></div>\"\n  );\n}","import * as angular from 'angular';\nimport Constants from './constants';\nimport TagsInputDirective from './tags-input';\nimport TagItemDirective from './tag-item';\nimport AutocompleteDirective from './auto-complete';\nimport AutocompleteMatchDirective from './auto-complete-match';\nimport AutosizeDirective from './autosize';\nimport BindAttributesDirective from './bind-attrs';\nimport TranscludeAppendDirective from './transclude-append';\nimport TagsInputConfigurationProvider from './configuration';\nimport UtilService from './util';\nimport TemplateCacheRegister from 'compiled-templates';\n\nangular.module('ngTagsInput', [])\n    .directive('tagsInput', TagsInputDirective)\n    .directive('tiTagItem', TagItemDirective)\n    .directive('autoComplete', AutocompleteDirective)\n    .directive('tiAutocompleteMatch', AutocompleteMatchDirective)\n    .directive('tiAutosize', AutosizeDirective)\n    .directive('tiBindAttrs', BindAttributesDirective)\n    .directive('tiTranscludeAppend', TranscludeAppendDirective)\n    .factory('tiUtil', UtilService)\n    .constant('tiConstants', Constants)\n    .provider('tagsInputConfig', TagsInputConfigurationProvider)\n    .run(TemplateCacheRegister);"],"names":["TagsInputDirective","$timeout","$document","$window","$q","tagsInputConfig","tiUtil","tiConstants","TagList","options","events","onTagAdding","onTagRemoving","self","getTagText","safeToString","tag","displayProperty","setTagText","text","canAddTag","tagText","valid","length","minLength","maxLength","allowedTagsPattern","test","findInObjectArray","items","keyProperty","when","$tag","then","promisifyValue","canRemoveTag","addText","add","replaceSpacesWithDashes","push","trigger","catch","remove","index","splice","clearSelection","select","selected","selectPrior","selectNext","removeSelected","getItems","useStrings","map","getStateTagJustAdded","tagJustAdded","setStateTagJustAdded","state","validateType","type","SUPPORTED_INPUT_TYPES","indexOf","$scope","$element","$attrs","simplePubSub","load","String","Number","fromCharCode","Boolean","MAX_SAFE_INTEGER","RegExp","tagList","handleUndefinedResult","registerAutocomplete","newTag","templateScope","name","handler","on","registerTagItem","disabled","scope","element","attrs","ngModelCtrl","hotkeys","KEYS","enter","comma","space","backspace","delete","left","right","input","find","validationOptions","setElementValidity","$setValidity","maxTags","minTags","hasFocus","allowLeftoverText","focusInput","focus","$isEmpty","value","angular","isDefined","track","getTagClass","tagClass","$index","$selected","$watch","makeObjectArray","tags","$validate","$observe","eventHandlers","$event","activeElement","prop","lostFocusToBrowserWindow","lostFocusToChildElement","contains","getTextData","clipboardData","originalEvent","getData","onTagAdded","onInvalidTag","onTagRemoved","onTagClicked","$setDirty","invalid","e","triggerHandler","addOnBlur","addFromAutocompleteOnly","key","event","keyCode","isModifierOn","addKeys","addOnEnter","addOnComma","addOnSpace","shouldAdd","shouldRemove","shouldEditLastTag","enableEditingLastTag","shouldSelect","preventDefault","addOnPaste","data","split","pasteSplitPattern","forEach","TagItemDirective","tagsInputCtrl","tagsInput","getOptions","$$template","template","$$removeTagSymbol","removeTagSymbol","$getDisplayText","$removeTag","removeTag","AutocompleteDirective","$sce","SuggestionList","loadFn","lastPromise","getTagId","getDifference","array1","array2","filter","item","a","b","defaultComparer","matchQuery","query","matched","toLocaleLowerCase","reset","visible","show","selectFirstMatch","debounce","promise","$query","onlyShowMatched","slice","maxResultsToShow","debounceDelay","scrollToElement","root","eq","parent","elementTop","elementHeight","parentHeight","parentScrollTop","suggestionList","source","registerAutocompleteMatch","tab","escape","up","down","shouldLoadSuggestions","loadOnEmpty","getTemplateScope","addSuggestionByIndex","addSuggestion","added","addTag","copy","getSuggestionClass","matchClass","$match","getCurrentTagText","getTags","isTagAdded","loadOnFocus","handled","loadOnDownArrow","stopImmediatePropagation","AutocompleteMatchDirective","autoCompleteCtrl","autoComplete","$parent","$highlight","highlightMatchedText","safeHighlight","getQuery","trustAsHtml","AutosizeDirective","ctrl","threshold","getTextAutosizeThreshold","span","css","append","resize","originalValue","width","isString","placeholder","$parsers","unshift","$formatters","$modelValue","BindAttributesDirective","tiBindAttrs","$set","TranscludeAppendDirective","transcludeFn","clone","TagsInputConfigurationProvider","globalDefaults","interpolationStatus","autosizeThreshold","setDefaults","directive","defaults","setActiveInterpolation","setTextAutosizeThreshold","$get","converters","toString","parseInt","toLowerCase","optionDefinitions","defaultValidator","localDefault","validator","converter","getDefault","globalValue","updateValue","newValue","$interpolate","UtilService","fn","delay","timeoutId","args","cancel","apply","array","isArray","isObject","obj","comparer","some","str","encodeHTML","escapeRegexChars","replace","expression","match","isUndefined","trim","valueIfUndefined","result","arguments","shiftKey","ctrlKey","altKey","metaKey","names","first","method","call","handlers","every","TemplateCacheRegister","$templateCache","put","factory","constant","Constants","provider","run"],"mappings":"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"}